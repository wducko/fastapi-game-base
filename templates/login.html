<html>

<head>
  <title>Item Details</title>
  <link href="{{ url_for('static', path='/styles.css') }}" rel="stylesheet">
</head>

<body>
  <div class="container">
    <div>
      <div>
        <!-- <form action="/login" method="post"> -->
        <form>
          <table>
            <tbody>
              <tr>
                <th colspan="2">Sign in</th>
              </tr>
              <tr>
                <td>
                  <label for="email">Email</label>
                </td>
                <td>
                  <input id="email" name="email_adress" type="email" autocomplete="off" autofocus="" required="">
                </td>
              </tr>
              <tr>
                <td>
                  <label for="password">Password</label>
                </td>
                <td>
                  <input id="password" name="password" type="password" required="">
                </td>
              </tr>
              <tr>
                <td colspan="2">
                  <button type="button" onclick="login();">Sign in</button>
                </td>
              </tr>
            </tbody>
          </table>
        </form>
        <p>
          <span>or register</span>
          <a href="/register"><strong>here</strong></a>.
        </p>
        <p>
          <span>{{ notice }}</span>
        </p>
      </div>
    </div>
  </div>
  <script type="text/javascript" src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script>
    function login() {
      let email_adress = $('input[name=email_adress]').val();   //폼의 이름 값을 변수 안에 담아줌
      let password = $('input[name=password]').val();   //폼의 이름 값을 변수 안에 담아줌
      let sendData = {
        email_adress,
        password
      }
      $.ajax({
        type:'post',   //post 방식으로 전송
        url:'/login',   //데이터를 주고받을 파일 주소
        data:JSON.stringify(sendData),   //위의 변수에 담긴 데이터를 전송해준다.
        success : function(data){   //파일 주고받기가 성공했을 경우. data 변수 안에 값을 담아온다.
          if(data.status == 200)
          {
            window.location.reload();
          }
        }
      });
    }
  </script>
</body>

</html>